# Rime schema
# encoding: utf-8

schema:
  schema_id: double_key_flynorman
  name: 小猿双拼双键
  version: "0.1"
  author:
    - double pinyin layout by cedar
  description: |
    朙月拼音＋小鶴雙拼norman布局+双键键盘。
  dependencies:
    - luna_pinyin

switches:
  - name: ascii_mode
    reset: 0
    states: [ 中, 英 ]
  - name: simplification
    reset: 1
    #states: [ 繁, 简 ]
  - options: [ _keyboard_default ]
    states: [ "　　　　　　　　　　" ]
  - options: [ _key_Hide ]
    states: [ ﹀ ]
#  - options: [ _keyboard_menu ]
#    states: [ "M" ]
#  - name: full_shape
#    states: [ 半角, 全角 ]
#  - name: ascii_punct
#    states: [ 。，, ．， ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
  filters:
    - simplifier
    - uniquifier

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " '"
  algebra:
    - erase/^xx$/
    - derive/^([jqxy])u$/$1v/
    - derive/^([aoe])([ioun])$/$1$1$2/
    - xform/^([aoe])(ng)?$/$1$1$2/
    - xform/iu$/Q/
    - xform/(.)ei$/$1W/
    - xform/uan$/F/
    - xform/[uv]e$/K/
    - xform/un$/J/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - xform/uo$/O/
    - xform/ie$/H/
    - xform/i?ong$/S/
    - xform/ing$|uai$/R/
    - xform/(.)ai$/$1D/
    - xform/(.)en$/$1T/
    - xform/(.)eng$/$1G/
    - xform/[iu]ang$/L/
    - xform/(.)ang$/$1Y/
    - xform/ian$/M/
    - xform/(.)an$/$1N/
    - xform/(.)ou$/$1Z/
    - xform/[iu]a$/X/
    - xform/iao$/P/
    - xform/(.)ao$/$1C/
    - xform/ui$/V/
    - xform/in$/B/
    - xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/
    - xlit/wfjrstyihxvp/qdkuaegnozcb/
    #- abbrev/^(.).+$/$1/

translator:
  dictionary: luna_pinyin
  prism: double_key_flynorman
  preedit_format:
    - xform/qq/QIU|WEI/
    - xform/qd/QUAN|WAI/
    - xform/qk/QUE|QUN/
    - xform/qu/QU|QING|WU/
    - xform/ql/QUANG|QIANG/
    - xform/qa/QIONG|WA/
    - xform/qe/WEN/
    - xform/qg/WENG|WANG/
    - xform/qn/QI|WAN/
    - xform/qo/QIE|WO/
    - xform/qz/QIA/
    - xform/qc/QV/
    - xform/qb/QIN|QIAO/
    - xform/qm/QIAN/
    - xform/dq/DIU|DEI|FEI/
    - xform/dd/DAI|DUAN/
    - xform/dk/DUN/
    - xform/du/DU|DING|FU/
    - xform/dl/DUANG/
    - xform/da/DA|DONG|FA/
    - xform/de/DE|DEN|FEN/
    - xform/dg/DENG|DANG|FENG|FANG/
    - xform/dn/DAN|DI|FAN/
    - xform/do/DUO|DIE|FO/
    - xform/dz/DOU|DIA|FOU/
    - xform/dc/DAO|DUI/
    - xform/db/DIAO/
    - xform/dm/DIAN/
    - xform/kq/JIU|JEI/
    - xform/kd/KAI|KUAN|JUAN/
    - xform/kk/KUN|JUE|JUN/
    - xform/ku/KU|KUAI|JU|JING/
    - xform/kl/KUANG|JIANG/
    - xform/ka/KA|KONG|JIONG/
    - xform/ke/KE|KEN/
    - xform/kg/KENG|KANG/
    - xform/kn/KAN|JI/
    - xform/ko/KUO|JIE/
    - xform/kz/KOU|KUA|JIA/
    - xform/kc/KAO|KUI|JV/
    - xform/kb/JIN|JIAO/
    - xform/km/JIAN/
    - xform/uq/SHEI/
    - xform/ud/SHAI|SHUAN|RUAN/
    - xform/uk/SHUN|RUN/
    - xform/uu/SHU|SHUAI|RU/
    - xform/ul/SHUANG/
    - xform/ua/SHA|RONG/
    - xform/ue/SHE|SHEN|RE|REN/
    - xform/ug/SHENG|SHANG|RENG|RANG/
    - xform/un/SHAN|SHI|RAN|RI/
    - xform/uo/SHUO|RUO/
    - xform/uz/SHOU|SHUA|ROU/
    - xform/uc/SHAO|SHUI|RAO|RUI/
    - xform/lq/LIU|LEI/
    - xform/ld/LAI|LUAN/
    - xform/lk/LUE|LUN/
    - xform/lu/LU|LING/
    - xform/ll/LIANG/
    - xform/la/LA|LONG/
    - xform/le/LE/
    - xform/lg/LENG|LANG/
    - xform/ln/LAN|LI/
    - xform/lo/LUO|LIE/
    - xform/lz/LOU|LIA/
    - xform/lc/LAO|LV/
    - xform/lb/LIN|LIAO/
    - xform/lm/LIAN/
    - xform/aq/SEI/
    - xform/ad/AI|SAI|SUAN/
    - xform/ak/SUN/
    - xform/au/SU/
    - xform/aa/A|SA|SONG/
    - xform/ae/SE|SEN/
    - xform/ag/ANG|SENG|SANG/
    - xform/an/AN|AI|SAN/
    - xform/ao/AO|SUO/
    - xform/az/SOU/
    - xform/ac/AO|SAO|SUI/
    - xform/eq/EI|TEI/
    - xform/ed/TAI|TUAN/
    - xform/ek/TUN/
    - xform/eu/TU|TING/
    - xform/ea/TA|TONG/
    - xform/ee/E|EN|TE/
    - xform/eg/ENG|TENG|TANG/
    - xform/en/EI|TAN|TI/
    - xform/eo/TUO|TIE/
    - xform/ez/TOU/
    - xform/ec/TAO|TUI/
    - xform/eb/TIN|TIAO/
    - xform/em/TIAN/
    - xform/gd/GAI|GUAN|YUAN/
    - xform/gk/GUN|YUE|YUN/
    - xform/gu/GU|GUAI|YU|YING/
    - xform/gl/GUANG/
    - xform/ga/GA|GONG|YA|YONG/
    - xform/ge/GE|GEN|YE/
    - xform/gg/GENG|GANG|YANG/
    - xform/gn/GAN|YAN|YI/
    - xform/go/GUO|YO/
    - xform/gz/GOU|GUA|YOU/
    - xform/gc/GAO|GUI|YAO|YV/
    - xform/gb/YIN|YIAO/
    - xform/nq/NIU|NEI/
    - xform/nd/NAI|NUAN|CHAI|CHUAN/
    - xform/nk/NUE|CHUN/
    - xform/nu/NU|NING|CHU|CHUAI/
    - xform/nl/CHUANG/
    - xform/na/NA|NONG|CHA|CHONG/
    - xform/ne/NE|NEN|CHE|CHEN/
    - xform/ng/NENG|NANG|CHENG|CHANG/
    - xform/nn/NAN|NI|CHAN|CHI/
    - xform/no/NUO|NIE|CHUO/
    - xform/nz/NOU|CHOU/
    - xform/nc/NAO|NUI|NV|CHAO/
    - xform/nb/NIN|NIAO/
    - xform/oq/HEI/
    - xform/od/HAI|HUAN/
    - xform/ok/HUN/
    - xform/ou/OU|HU|HUAI/
    - xform/ol/HUANG/
    - xform/oa/ONG|HA|HONG/
    - xform/oe/HE|HEN/
    - xform/og/HENG|HANG/
    - xform/on/HAN/
    - xform/oo/O|HUO/
    - xform/oz/OU|HOU|HUA/
    - xform/oc/HAO|HUI/
    - xform/zq/XIU|XEI/
    - xform/zd/ZAI|ZUAN|XUAN/
    - xform/zk/ZUN|XUE|XUN/
    - xform/zu/ZU|XU|XING/
    - xform/zl/XIANG/
    - xform/za/ZA|ZONG|XIONG/
    - xform/ze/ZE|ZEN/
    - xform/zg/ZENG|ZANG/
    - xform/zn/ZAN|ZI|XI/
    - xform/zo/ZUO|XIE/
    - xform/zz/ZOU|XIA/
    - xform/zc/ZAO|ZUI|XV/
    - xform/zb/XIN|XIAO/
    - xform/zm/XIAN/
    - xform/cd/CAI|CUAN|ZHAI|ZHUAN/
    - xform/ck/CUN|ZHUN/
    - xform/cu/CU|ZHU|ZHUAI/
    - xform/cl/ZHUANG/
    - xform/ca/CA|CONG|ZHA|ZHONG/
    - xform/ce/CE|CEN|ZHE|ZHEN/
    - xform/cg/CENG|CANG|ZHENG|ZHANG/
    - xform/cn/CAN|CI|ZHAN|ZHI/
    - xform/co/CUO|ZHUO/
    - xform/cz/ZHOU|ZHUA/
    - xform/cc/CAO|CUI|ZHAO|ZHUI/
    - xform/bq/BEI|PEI/
    - xform/bd/BAI|PAI/
    - xform/bu/BU|BING|PU|PING/
    - xform/ba/BA|PA/
    - xform/be/BEN|PEN/
    - xform/bg/BENG|BANG|PENG|PANG/
    - xform/bn/BAN|BI|PAN|PI/
    - xform/bo/BO|BIE|PO|PIE/
    - xform/bz/POU|PIA/
    - xform/bc/BAO|PAO/
    - xform/bb/BIN|BIAO|PIN|PIAO/
    - xform/bm/BIAN|PIAN/
    - xform/mq/MEI/
    - xform/md/MAI/
    - xform/mu/MU|MING/
    - xform/ma/MA/
    - xform/me/ME|MEN/
    - xform/mg/MENG|MANG/
    - xform/mn/MAN|MI/
    - xform/mo/MO|MIE/
    - xform/mz/MOU/
    - xform/mc/MAO/
    - xform/mb/MIN|MIAO/
    - xform/mm/MIAN/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    #- "xform/(^|[ '])v/$1zh/"
    #- "xform/(^|[ '])i/$1ch/"
    #- "xform/(^|[ '])u/$1sh/"

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "`[a-z]*'?$"
